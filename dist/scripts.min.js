"use strict";function getUIPref(){return new Promise(function(e,t){chrome.storage.sync.get({enableFlatUI:""},function(n){chrome.runtime.error?t(Error("Pref could not be loaded.")):e(n)})})}function updateUIPref(e){chrome.storage.sync.set({enableFlatUI:e},function(){chrome.runtime.error&&void 0})}function toggleUI(){var e=document.querySelector("body");return e.classList.contains("flatUI")?(e.classList.remove("flatUI"),updateUIPref(!1)):(e.classList.add("flatUI"),updateUIPref(!0)),!1}chrome.runtime.sendMessage({},function(){var e=setInterval(function(){if("complete"===document.readyState){clearInterval(e);var t=document.getElementsByTagName("body")[0],n=document.createElement("span"),o=document.createElement("span");n.setAttribute("id","toggleButton"),n.setAttribute("class","toggleButton"),o.setAttribute("class","toggleText"),o.innerHTML="IRC",t.appendChild(n),n.appendChild(o),getUIPref().then(function(e){e.enableFlatUI?document.querySelector("body").classList.add("flatUI"):document.querySelector("body").classList.remove("flatUI"),document.getElementById("toggleButton").onclick=toggleUI})}},10)});