"use strict";function getUIPref(){return new Promise(function(t,n){chrome.storage.sync.get({enableFlatUI:""},function(e){chrome.runtime.error?n(Error("Pref could not be loaded.")):t(e)})})}function updateUIPref(e){chrome.storage.sync.set({enableFlatUI:e},function(){chrome.runtime.error})}function toggleUI(){var e=document.querySelector("body");return e.classList.contains("flatUI")?(e.classList.remove("flatUI"),updateUIPref(!1)):(e.classList.add("flatUI"),updateUIPref(!0)),!1}chrome.runtime.sendMessage({},function(){var o=setInterval(function(){if("complete"===document.readyState){clearInterval(o);var e=document.getElementsByTagName("body")[0],t=document.createElement("span"),n=document.createElement("span");t.setAttribute("id","toggleButton"),t.setAttribute("class","toggleButton"),n.setAttribute("class","toggleText"),n.innerHTML="IRC",e.appendChild(t),t.appendChild(n),getUIPref().then(function(e){e.enableFlatUI?document.querySelector("body").classList.add("flatUI"):document.querySelector("body").classList.remove("flatUI"),document.getElementById("toggleButton").onclick=toggleUI})}},10)});