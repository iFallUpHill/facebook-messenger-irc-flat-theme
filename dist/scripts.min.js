"use strict";function getUIPref(){return new Promise(function(t,o){chrome.storage.sync.get({enableFlatUI:""},function(e){chrome.runtime.error?o(Error("Pref could not be loaded.")):t(e)})})}function updateUIPref(e){chrome.storage.sync.set({enableFlatUI:e},function(){chrome.runtime.error})}function toggleUI(e){var t=document.querySelector("body"),o=e.ctrlKey||e.metaKey;return t.classList.contains("flatUI")?(t.classList.remove("flatUI"),t.classList.remove("ircMode"),updateUIPref(!1)):(t.classList.add("flatUI"),o&&t.classList.add("ircMode"),updateUIPref(o?"ircMode":"flatUI")),!1}chrome.runtime.sendMessage({},function(){var r=setInterval(function(){if("complete"===document.readyState){clearInterval(r);var e=document.getElementsByTagName("body")[0],t=document.createElement("span"),o=document.createElement("span");t.setAttribute("id","toggleButton"),t.setAttribute("class","toggleButton"),o.setAttribute("class","toggleText"),o.innerHTML="IRC",e.appendChild(t),t.appendChild(o),getUIPref().then(function(e){"flatUI"===e.enableFlatUI?document.querySelector("body").classList.add("flatUI"):"ircMode"===e.enableFlatUI?(document.querySelector("body").classList.add("flatUI"),document.querySelector("body").classList.add("ircMode")):(document.querySelector("body").classList.remove("flatUI"),document.querySelector("body").classList.remove("ircMode")),document.getElementById("toggleButton").onclick=toggleUI})}},10)});